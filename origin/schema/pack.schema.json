{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://origin.local/schema/pack.schema.json",
  "title": "ORIGIN Pack Schema",
  "description": "Schema for validating ORIGIN knowledge pack YAML files",
  "type": "object",
  "required": [
    "id",
    "title",
    "summary",
    "authorship",
    "provenance",
    "disclosure_tier",
    "sensitivity",
    "tags",
    "created_date",
    "updated_date",
    "status"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^C[0-9]{4}$",
      "description": "Unique concept identifier (e.g., C0001)"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200,
      "description": "Human-readable title of the concept"
    },
    "summary": {
      "type": "string",
      "minLength": 10,
      "maxLength": 1000,
      "description": "Brief summary of the concept"
    },
    "authorship": {
      "type": "string",
      "description": "Attribution line for this concept",
      "default": "Ande + Kai (OI) + WhƒÅnau (OIs)"
    },
    "provenance": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["type", "ref"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["master_prompt", "document", "conversation", "external", "derived", "rationalization", "capsule_ingestion", "origin_integration"],
            "description": "Type of provenance source"
          },
          "ref": {
            "type": "string",
            "description": "Reference identifier or description"
          }
        }
      },
      "description": "Chain of provenance for this concept"
    },
    "disclosure_tier": {
      "type": "string",
      "enum": ["public", "internal", "restricted"],
      "description": "Access control tier for this concept"
    },
    "sensitivity": {
      "type": "object",
      "required": ["pii_risk", "contains_personal", "redacted"],
      "properties": {
        "pii_risk": {
          "type": "string",
          "enum": ["none", "low", "medium", "high"],
          "description": "Assessed PII risk level"
        },
        "contains_personal": {
          "type": "boolean",
          "description": "Whether content references individuals"
        },
        "redacted": {
          "type": "boolean",
          "description": "Whether [[REDACTED]] tokens have been applied"
        }
      },
      "description": "Privacy sensitivity assessment"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$"
      },
      "description": "Lowercase kebab-case tags for categorization"
    },
    "created_date": {
      "type": "string",
      "format": "date",
      "description": "ISO 8601 date when concept was created"
    },
    "updated_date": {
      "type": "string",
      "format": "date",
      "description": "ISO 8601 date when concept was last updated"
    },
    "parents": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^C[0-9]{4}$"
      },
      "description": "Parent concept IDs"
    },
    "children": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^C[0-9]{4}$"
      },
      "description": "Child concept IDs"
    },
    "related": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^C[0-9]{4}$"
      },
      "description": "Related concept IDs (non-hierarchical)"
    },
    "claims": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Explicit claims made by this concept (from corpus only)"
    },
    "tests_or_falsifiers": {
      "type": "array",
      "minItems": 2,
      "items": {
        "type": "object",
        "required": ["name", "description", "falsification_condition"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the test or falsifier"
          },
          "description": {
            "type": "string",
            "description": "What this test validates"
          },
          "falsification_condition": {
            "type": "string",
            "description": "Condition that would falsify or fail the test"
          }
        }
      },
      "description": "Tests and falsifiers (minimum 2 required)"
    },
    "artifacts": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Paths to artifact files relative to pack directory"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "active", "release"],
      "description": "Maturity status of this concept"
    }
  },
  "additionalProperties": false
}
